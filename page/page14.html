<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<title>page14</title>
	<link rel="stylesheet" href="../css/reset.css">
	<link rel="stylesheet" href="../css/dpage.css">
	<link rel="stylesheet" href="../css/darre.css">
	<link rel="stylesheet" href="../js/layer_mobile/need/layer.css">

	<script type="text/javascript" src="../js/default.js"></script>
	<script type="text/javascript" src="../bower_components/jquery2/jquery.js"></script>
	<script type="text/javascript" src="../js/hammer.js"></script>
	<script type="text/javascript" src="../js/html2canvas.js"></script></head>
    <script type="text/javascript" src="../js/handleData.js"></script>
<body>
	<div class="page page14">
		<div class="bg">
			<div class="aircraft when_15_appear" id="page_14_aircraft">
				<div class="needClick"></div>
			</div>
			<div class="bgsky" id="bgsky"></div>
			<div class="page page15 " id="main_page_15" style="display: none;">
				<div class="bg" style="background: none;">
					<div class="title"></div>
					<!--<img class="title" src="../img/page_end/page_end_title_03.png" alt="">-->
					<div class="page15_text">
						<div class="need_rolate">
							<div class="person_nick_name">飞行豪门</div>
							<p>论飞行，舍你其谁，你就是住在天上的豪门！没有人能阻止你去拥有更好的世界。</p>
						</div>
						<div class="main_content">
							<div class="main_title">
								王先生的<br>的2018年度飞行报告
							</div>
							<div class="content_text" style="height: 2.29rem;overflow: hidden;">
								<h3>2018总飞行里程</h3>
								<p><span>888</span>公里</p>
								<h3>2018总飞行时间</h3>
								<p><span>888</span>小时</p>
								<h3>2018总飞行次数</h3>
								<p><span>888</span>次</p>
							</div>
							<div class="second_title">专属报告</div>
							<div class="second_text">
								您是白金卡/金卡会员<br>
								并且乘坐头等舱/公务舱次数5次<br>
								累积消费金额TOP10%
							</div>
						</div>
					</div>
					<div class="aircraft_4_15"></div>
					<div class="person lady"></div>
				</div>
				<div class="btn btn_left" id="checkout_img">分享你的报告</div>
				<div class="btn btn_right" id="eastern_recommend">2019东东推荐</div>
			</div>
			<!--<div class="earth"></div>-->
			<!--<div class="building"></div>-->
			<div class="page14_text hide when_15_appear" id="page14_text_has_data">
				<p>2018年东航和您一起走过了</p>
				<p class="_ht"></p>
				<p>等<span class="num"></span>座城市</p>
			</div>
			<div class="page14_text hide when_15_appear" id="page14_text_no_data">
				<p class="title">最新国际通航点</p>
				<p>斯德哥尔摩</p>
				<p>迪拜</p>
				<p>盖尔特尔</p>
				<p>凯恩斯</p>
				<p>克拉克</p>
				<p>年复一年，东航期待陪你探索更多</p>
			</div>
		</div>
	</div>




	<!--not important part-->
	<div class="page page15 page15_4_canvas" style="z-index: -101;">
		<div class="bg" id="page_4_img">
			<div class="title"></div>
			<div class="page15_text">
				<div class="need_rolate">
					<div class="person_nick_name">飞行豪门</div>
					<p>论飞行，舍你其谁，你就是住在天上的豪门！没有人能阻止你去拥有更好的世界。</p>
				</div>
				<div class="main_content">
					<div class="main_title">
						王先生的<br>的2018年度飞行报告
					</div>
					<div class="content_text" style="height: 2.29rem;overflow: hidden;">
						<h3>2018总飞行里程</h3>
						<p><span>888</span>公里</p>
						<h3>2018总飞行时间</h3>
						<p><span>888</span>小时</p>
						<h3>2018总飞行次数</h3>
						<p><span>888</span>次</p>
					</div>
					<div class="second_title">专属报告</div>
					<div class="second_text">
						您是白金卡/金卡会员<br>
						并且乘坐头等舱/公务舱次数5次<br>
						累积消费金额TOP10%
					</div>
				</div>
			</div>
			<div class="aircraft_4_15"></div>
			<div class="person lady"></div>
		</div>
	</div>
	<div class="page_for_canvas_wrap page" style="z-index: -99;">
		<div class="page_for_canvas" id="page_for_canvas" >
			<div class="canvas_img">
				<img src="" alt="" id="canvasImg">
			</div>
			<div class="canvas_logo">
				<img src="../img/page_end/canvas_logo_03.png" alt="">
			</div>
			<div class="remmber_txt">
				<img src="../img/page_end/canvas_qrcode_03.png" alt="">
			</div>
		</div>
	</div>
	<div class="page_absolute_4_img page" id="page_absolute_4_img" style="display: none;background: #ffffff;z-index: 187;overflow: auto">
		<img src="" alt="" style="width: 100%;">
	</div>


	<script type="text/javascript">
		$(document).ready(function () {
		    console.log("aircraft join~");
			//确保飞机已经进入界面
			setTimeout(function () {
				$('.page14 .aircraft').css({
					'animation':'newAircraftSecond 9s 0s linear forwards infinite',
					'-webkit-animation':'newAircraftSecond 9s 0s linear forwards infinite',
				});
            },1200)
			$("#page_14_aircraft").click(function () {
                console.log("aircraft leave~");
                $('.page14 .aircraft').animate({
					left:'7.5rem',
					top:'-0.6rem',
				},600);
                $(".page14").find('.when_15_appear').fadeOut(500);
                setTimeout(function () {
                    $("#main_page_15").fadeIn(800);
                },500)
            })

            $("#checkout_img").click(function () {
                if(window.base64ImgSrcAnother){
                    $("#page_absolute_4_img").fadeIn(500);
                    $("#page_absolute_4_img").find('img').attr("src",window.base64ImgSrcAnother);
                    return;
                }
                var canvas = document.createElement("canvas");
                canvas.width = 750;
                canvas.height = 1400;
                var opts = {
                    canvas: canvas,                       // 将自定义canvas作为配置项
                    // useCORS: true,                        // 允许图片跨域
                }
                html2canvas(document.querySelector("#page_4_img"),opts).then(function (canvas) {
                    window.base64ImgSrc = canvas.toDataURL("image/jpeg",.92);
                    console.log(window.base64ImgSrc);
                    $("#canvasImg").attr("src",window.base64ImgSrc)
                }).then(function () {
                    console.log("生成base64图片源码~~!");
                    var canvas = document.createElement("canvas");
                    canvas.width = 750;
                    canvas.height = 1450;
                    var opts = {
                        canvas: canvas,                       // 将自定义canvas作为配置项
//                     useCORS: true,                        // 允许图片跨域
                    }
                    html2canvas(document.querySelector("#page_for_canvas"),opts).then(function (canvas) {
                        window.base64ImgSrcAnother = canvas.toDataURL("image/jpeg",.72);
                    }).then(function () {
                        $("#page_absolute_4_img").fadeIn(500);
                        $("#page_absolute_4_img").find('img').attr("src",window.base64ImgSrcAnother);
                    })
                })

            });
            $("#page_absolute_4_img").click(function (e) {
                $("#page_absolute_4_img").fadeOut(500);
            })
        })
	</script>
	<script type="text/javascript" src="../js/main.js"></script>


</body>
</html>